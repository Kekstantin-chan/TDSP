### Одноканальная СМО с отказами

**Пример.** Секретарю директора завода поступает в среднем 1,2 телефонных вызовов в минуту. Средняя продолжительность разговора составляет 2 минуты. Найти основные характеристики СМО и оценить эффективность её работы.

**Решение:** По условию $\lambda=1.2$ мин, $\mu=2$ мин, откуда $\rho=\frac{\lambda}{\mu}=0.6$. Далее находим $p_{обс}$ и $p_{отк}$: 
$$
p_{обс}=p_0=\frac{\mu}{\mu+\lambda}=\frac{1}{1+\rho}=0.625
$$

$$
p_{отк}=p_1=\frac{\lambda}{\mu+\lambda}=\frac{\rho}{1+\rho}=0.375
$$

Таким образом, обслуживается лишь 62,5% звонков, что нельзя считать удовлетворительным. Абсолютная пропускная способность СМО:
$$
A=\lambda Q=\lambda p_{обс}=1.2\cdot0.625=0.75(min)^{-1}
$$
т.е. в среднем обслуживается 0,75 звонка в минуту.

### Многоканальная СМО с отказами

**Пример.** Найти оптимальное число телефонных номеров на предприятии, если заявки на переговоры поступают с интенсивностью 1,2 заявки в минуту, а средняя продолжительность разговора по телефону составляет $t_{обс}=2\min$. Найти также вероятность того, что в СМО за 3 минуты поступит: а) точно 2 заявки, б) не более 2-х заявок.

**Решение:** Имеем: $\lambda = 1.2$, $\mu=\frac{1}{t}=\frac{1}{2}=0.5$, $\rho=\frac{\lambda}{\mu}=2.4$. Оптимальное число каналов $n$ неизвестно. (Т.к. неизвестно n, то оно просто увеличивается на 1 и для него считаются параметры, ниже будет приведена таблица). Используя формулы, которые приведены ниже, найдём характеристики СМО при различных значениях n и заполним таблицу 1.

**Формулы**: 

Формулы Эрланга:
$$
p_0=(1+\frac{\rho}{1!}+\frac{\rho^2}{2!}+...+\frac{\rho^n}{n!})^{-1}\\
p_k=\frac{\rho^k}{k!}\cdot p_0, k=\overline{1,n}\\
$$
Вероятность отказа в обслуживании заявки:
$$
p_{отк}=p_n=\frac{\rho^n}{n!}\cdot p_0
$$
Относительная пропускная способность:
$$
Q=p_{обс}=1-p_{отк}=1-\frac{\rho^n}{n!}\cdot p_0
$$
Абсолютная пропускная способность: 
$$
A=\lambda\cdot Q=\lambda\cdot(1-\frac{\rho^n}{n!}\cdot p_0)
$$
Среднее число занятых каналов:
$$
\overline{n_з}=\frac{A}{Q}=\rho(1-\frac{\rho^n}{n!}\cdot p_0)
$$

|        n         |   1   |   2   |   3   |   4   |   5   |   6   |
| :--------------: | :---: | :---: | :---: | :---: | :---: | :---: |
|      $p_0$       | 0,294 | 0,159 | 0,116 |  0,1  | 0,094 | 0,092 |
|    $p_{отк}$     | 0,706 | 0,847 | 0,677 | 0,406 | 0,195 | 0,024 |
|    $p_{обс}$     | 0,294 | 0,153 | 0,323 | 0,594 | 0,805 | 0,976 |
| $\overline{n_з}$ | 0,706 | 0,367 | 0,775 | 1,426 | 1,932 | 2,342 |
|      $K_з$       | 0,706 | 0,184 | 0,258 | 0,357 | 0,386 | 0,391 |
|       $A$        | 0,353 | 0,184 | 0,388 | 0,713 | 0,966 | 1,171 |

Оптимальным числом телефонных номеров можно считать $n = 6$, когда выполняется 97,6% заявок. При этом за каждую минуту обслуживается в среднем 1,171 заявки. Решение пунктов a и б:
$$
a)\ p_{i=2}(t=3)=\frac{(\lambda t)^i}{i!}e^{-\lambda t} = 0.177\\
б)\ p_{\leq\ 2}(3)=p_0(3)+p_1(3)+p_2(3)=(1+\frac{1.2\cdot 3}{1!}+\frac{(1.2\cdot 3)^2}{2!})e^{-1.2\cdot3}=0.03
$$

### Одноканальная СМО с ограниченной длиной очереди

**Пример.** Магазин посещает в среднем 90 человек в час. Имеющийся один кассир обслуживает в среднем одного покупателя в минуту. Очередь в зал обслуживания ограничена 5 покупателями. Оценить эффективность работы СМО.

**Решение:** Имеем: $\lambda=90\ (час)^{-1}=1,5\ (мин)^{-1}$, $\mu=1\ (мин)^{-1}$, $\rho=\frac{\lambda}{\mu}=1,5$, $m = 5$. Найдем $p_0$ и $p_{отк}$:
$$
p_0=\frac{1-\rho}{1-\rho^{m+2}}=\frac{1-1.5}{1-(1.5)^7}=0.031\\
p_{отк}=\rho^{m+1}\cdot p_0=(1.5)^6\cdot 0.031=0.354
$$
т.е. 35,4% покупателей получают отказ в обслуживании, что недопустимо много. Среднее число людей, стоящих в очереди, находим по формуле:
$$
L_{оч}=(1.5)^2\cdot\frac{1-(1.5)^5[5(1-1.5)+1]}{(1-1.5)^2}\cdot0.031=3.457
$$
Среднее время пребывания в очереди находим по формуле:
$$
\overline{t_{оч}}=\frac{L_{оч}}{\lambda}=\frac{3.457}{1.5}=2.3
$$
т.е. $\overline{t_{оч}}$ не очень большое. Увеличение очереди до $m = 10$ даёт:
$$
p_0=0.0039,\ p_{отк}=0.0336
$$
т.е. не приводит к заметному уменьшению отказов в обслуживании. Вывод: необходимо посадить ещё одного кассира, либо уменьшить время обслуживания каждого покупателя.

### Одноканальная СМО с неограниченной очередью.

**Пример.** В билетной кассе работает один кассир, обслуживающий в среднем двух покупателей за одну минуту. Каждый час в среднем приходят покупать билеты 90 посетителей. Провести анализ работы СМО.

**Решение:** Имеем: $\lambda=90\ (час)^{-1}=1.5\ (min)^{-1}, \mu=2\ (min)^{-1}, \rho=\frac{\lambda}{\mu}=0.75$. Найдем $p_0$: 
$$
p_0=1-p=1-0.75=0.25
$$
т.е. 25% времени кассир не занимается продажей билетов. Средняя длина очереди равна:
$$
L_{оч}=\frac{\rho^2}{1-\rho}=\frac{0.75^2}{1-0.75}=2.25
$$
а среднее число покупателей, находящихся в СМО (т.е. у кассы), равно:
$$
L_{смо}=\frac{\rho}{1-\rho}=\frac{0.75}{1-0.75}=3
$$
Среднее время нахождения покупателя в СМО найдём по формуле:
$$
\overline{t_{смо}}=\frac{L_{смо}}{\lambda}=\frac{3}{1.5}=2
$$
что вполне приемлемо.

### Многоканальная СМО с ограниченной очередью

**Пример:** На склад в среднем прибывает 3 машины в час. Разгрузку осуществляют 3 бригады грузчиков. Среднее время разгрузки машины - 1час. В очереди в ожидании разгрузки могут находиться не более 4-х машин. Дать оценку работы СМО.

**Решение:** Имеем: $n=3,\lambda=3,\mu=1,\rho=\frac{\lambda}{\mu}=3,m=4$. Так как $\rho=n$, то $p_0$ - вероятность отсутствия машин на складе, находим по формуле:
$$
p_0=(1+\frac{n}{1!}+\frac{n^2}{2!}+...+\frac{n^n}{n!}+\frac{n^n}{n!}m)^{-1}
$$
т.е. грузчики работают практически без отдыха. По формуле находим вероятность отказа в обслуживании прибывшей на склад машины:
$$
p_{отк}=\frac{\rho^{n+m}}{n^mn!}p_0=\frac{3^{3+4}}{3^4}\cdot\frac{1}{31}=\frac{9}{62}=0.145
$$
Т.е. вероятность отказа не столь велика. Относительная пропускная способность равна:
$$
Q=p_{обс}=1-p_{отк}=1-0.145=0.855
$$
Среднее число машин в очереди находим по формуле:
$$
L_{оч}=\frac{3^3}{3!}\cdot\frac{4\cdot5}{2}\cdot\frac{1}{31}=\frac{45}{31}=1.45\ машин, т.е. существенно\ меньше\ m=4
$$
Среднее время пребывания машины на складе находим по формуле:
$$
\overline{t_{смо}}=\frac{L_{оч}}{\lambda}+\frac{Q}{\mu}=(\frac{45}{31}\cdot\frac{1}{3}+\frac{0.855}{1})=1.34
$$
что сравнимо со средним временем разгрузки машины. Можно сделать вывод, что разгрузка машин на складе организована эффективно.

### Многоканальная СМО с неограниченной очередью

**Пример.** Интенсивность потока посетителей столовой составляет 150 человек в час. Имеется 3 кассира, каждый из которых обслуживает в среднем 1 посетителя за минуту. Найти характеристики СМО.

**Решение:** Имеем: $n=3,\lambda=150\ (час)^{-1}=2.5\ (min)^{-1},\mu=1, \rho=\frac{\lambda}{\mu}=2.5$.Вероятность отсутствия посетителей в столовой находим по формуле:
$$
p_0=(1+\frac{\rho}{1!}+\frac{\rho^2}{2!}+...+\frac{\rho^{n-1}}{(n-1)!}+\frac{\rho^{n}}{(n-1)!}\cdot\frac{1}{n-\rho})^{-1}=(1+\frac{2.5}{1!}+\frac{2.5^2}{2!}+\frac{(2.5)^3}{3!}\cdot\frac{1}{3-2.5})^{-1}=0.0555
$$
т.е. работники столовой практически всё время заняты. Вероятность образования очереди:
$$
p_{оч}=\frac{\rho^n}{n!}\cdot\frac{n}{n-\rho}\cdot p_0=\frac{2,5^3}{3!}\cdot\frac{3}{3-0.5}\cdot0.0555=0.87
$$
Среднее число посетителей в очереди:
$$
L_{оч}=\frac{2.5^{3+1}}{3!}\cdot\frac{3}{(3-2.5)^2}\cdot0.0555=4.35\ человек
$$
а среднее число обслуживаемых посетителей:
$$
L_{обс}=\rho=2.5\ человек
$$
Среднее число посетителей (обслуживаемых и в очереди) равно:
$$
L_{смо}=L_{оч}+L_{обс}=6.35\ человек
$$
т.е. чуть больше одного посетителя на каждого кассира, что оптимально. Среднее время, затрачиваемое посетителем на получение обеда, находим по формуле:
$$
\overline{t_{смо}}=\frac{L_{оч}}{\lambda}+\frac{Q}{\mu}=(\frac{4.35}{2.9}+\frac{1}{1})=2.16\ мин
$$
что совсем немного. Можно сделать вывод, что работа столовой организована эффективно.

### Многоканальная СМО с ограниченной очередью и ограниченным временем ожидания в очереди

**Пример.** В парикмахерской работают 3 мастера. За 1 час в парикмахерскую приходят в среднем 10 человек. Среднее время обслуживания клиента каждым мастером - 20минут. Зал ожидания рассчитан на 4 места. Среднее время ожидания клиента в очереди tож -10минут. Найти характеристики СМО.

**Решение:** Имеем: $n=3,m=4,\lambda=10,\mu=3,\rho=\frac{\lambda}{\mu}=10/3,t_{ож}=1/6\ часа,\nu=\frac{1}{t_{ож}}=6,\beta=\frac{\nu}{\mu}=2$. По формуле находим $p_0$ - вероятность того, что все мастера свободны:
$$
p_0=(1+\frac{1}{1!}\cdot\frac{10}{3}+\frac{1}{2!}\cdot(\frac{10}{3})^2+\frac{1}{3!}\cdot(\frac{10}{3})^3+\frac{1}{3!}\cdot(\frac{10}{3})^2[\frac{10/3}{3+1\cdot2}+\frac{(10/3)^2}{(3+1\cdot2)(3+2\cdot2)}+\frac{(10/3)^3}{(3+1\cdot2)(3+2\cdot2)(3+3\cdot2)}+\frac{(10/3)^4}{(3+1\cdot2)(3+2\cdot2)(3+3\cdot2)(3+4\cdot2)}])^{-1}=0.0433
$$
По формуле находим вероятности занятости одного, 2-х и 3-х мастеров: 
$$
p_1=\frac{1}{1!}\cdot\frac{10}{3}\cdot0.0433=0.1444\\
p_2=\frac{1}{2!}\cdot(\frac{10}{3})^2\cdot0.0433=0.2407\\
p_n=p_3=\frac{1}{3!}\cdot(\frac{10}{3})^3\cdot0.0433=0.2674
$$
По формуле находим вероятности того, что в очереди 1, 2, 3, 4 человека:
$$
p_{n+1}=0.2674\cdot\frac{(10/3)^2}{3+1\cdot2}=0.1783\\
p_{n+2}=0.2674\cdot\frac{(10/3)^2}{(3+1\cdot2)(3+2\cdot2)}=0.0849\\
p_{n+3}=0.2674\cdot\frac{(10/3)^2}{(3+1\cdot2)(3+2\cdot2)(3+3\cdot2)}=0.0314\\
p_{n+3}=0.2674\cdot\frac{(10/3)^2}{(3+1\cdot2)(3+2\cdot2)(3+3\cdot2)(3+4\cdot2)}=0.0095
$$
Вероятность отказа в обслуживании равна
$$
p_{отк}=p_{m+4}=0.0095
$$


Относительная пропускная способность
$$
Q=1-p_{отк}=0.9905
$$


а абсолютная пропускная способность равна
$$
A=\lambda Q=9.9
$$


т.е. примерно 10 человек в час, что практически равно интенсивности потока посетителей. 

Среднее число клиентов в очереди найдём по формуле:
$$
L_{оч}=1\cdot0.1783+2\cdot0.0849+3\cdot0.0314+4\cdot0.095=0.82
$$


т.е. менее одного человека. Среднее время пребывания посетителя в парикмахерской найдём по формуле :
$$
\overline{t_{смо}}=\frac{Q}{\mu}+t_{ож}=\frac{0.9905}{1/20}+10=30
$$

### Задача про АЗС с самостоялки

**Пример.** Рассматривается работа автозаправочной станции (АЗС), на которой имеется 4 заправочные колонки. Заправка одной машины длится в среднем 6 минут. В среднем, каждые 3 минуты на АЗС прибывает машина, нуждающаяся в заправке. Число мест в очереди практически не ограничено. Все машины, вставшие в очередь, терпеливо дожидаются заправки, так как других АЗС поблизости нет. Определить, существует ли стационарный режим работы СМО. Если нет, то уменьшите среднее время обслуживания одной машины и повторите расчеты. Если стационарный режим существует, определите: 

1. вероятности $p_i(i=0,1,2,3,4)$.
2. вероятности наличия очереди $p_{оч}$
3. среднюю длину очереди $\overline s$.
4. среднее число занятых колонок $\overline k$.
5. вероятности занятости каждой колонки $p_{зан}$
6. среднее время ожидания машины в очереди $\overline t_{оч}$.
7. среднее время простоя колонки $t_{пр}$.

**Решение:** Из условия задачи $n=4,\overline t_{обл}=1/20,\lambda = 20$ машин в час, $\mu=10,\alpha = \frac{\lambda}{\mu}=2$. Найдем:
$$
\sum^4_{i=0}\frac{a^i}{i!}=1+\alpha+\frac{\alpha^2}{2}+\frac{\alpha^3}{6}+\frac{\alpha^4}{24}=\frac{21}{3}
$$

$$
\frac{a^{n+1}}{n!(n-\alpha)}=\frac{\alpha^5}{24(4-\alpha)}=\frac{4}{6}=\frac{2}{3}
$$

В итоге знаменатель дробей в формулах вероятностей состояний равен 
$$
\sum^4_{i=0}\frac{a^i}{i!}+\frac{\alpha^5}{24(4-\alpha)}=23/3
$$

1. Найдем вероятность загруженности каналов:

$$
p_k=\frac{\frac{\alpha^k}{k!}}{\sum^4_{i=0}\frac{a^i}{i!}+\frac{\alpha^{n+1}}{n!(n-\alpha)}}\\
p_5=\frac{\frac{\alpha^{n+s}}{n!n^s}}{\sum^4_{i=0}\frac{a^i}{i!}+\frac{\alpha^{n+1}}{n!(n-\alpha)}}=\frac{1}{23}\\
p_6=\frac{1}{46}
p_7=\frac{1}{92}
$$

2. Вероятность наличия очереди определется так:

$$
p_{оч}=1-(p_0+p_1+p_2+p_3+p_4)=2/23
$$

3. Определим среднюю длину очереди:

$$
\overline s=\frac{\frac{\alpha^{n+1}}{n!n(1-\alpha/n)^2}}{\sum^4_{i=0}\frac{a^i}{i!}+\frac{\alpha^{n+1}}{n!(n-\alpha)}}=4/23
$$

4. Так как $p_{обсл}=1$, то $\overline k=\alpha p_{обсл}=\alpha=2$.
5. Найдем вероятность занятости канала:

$$
p_{зн}=\frac{\overline k}{n}=2/4=1/2
$$

6. Среднее время простоя равно:

$$
\overline t_{пр}=\frac{1-p_{зн}}{\mu\cdot p_{зн}}=0.1
$$

